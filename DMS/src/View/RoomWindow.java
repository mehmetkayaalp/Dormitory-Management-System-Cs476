/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package view;

import java.sql.SQLException;
import java.util.ArrayList;

import background.Dorm;
import background.Room;
import database.DBConnection;

import javax.swing.GroupLayout.Alignment;
import javax.swing.GroupLayout;
import javax.swing.LayoutStyle.ComponentPlacement;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JTextField;

import java.awt.Font;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

/**
 *
 * @author Nazli
 */
public class RoomWindow extends javax.swing.JFrame {
	final JComboBox cboxDorm = new JComboBox();
	final JComboBox cboxRoomType = new JComboBox();
	/**
	 * Creates new form StudentWindow
	 */
	public RoomWindow() {
		setTitle("Add Room No ");
		initComponents();
	}

	/**
	 * This method is called from within the constructor to initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is always
	 * regenerated by the Form Editor.
	 */
	@SuppressWarnings("unchecked")
	// <editor-fold defaultstate="collapsed"
	// desc="Generated Code">//GEN-BEGIN:initComponents
	private void initComponents() {

		dormAddDutton = new javax.swing.JButton();
		roomDormNumberLabel = new javax.swing.JLabel();
		roomRoomNumberLabel = new javax.swing.JLabel();
		roomRoomTypeLabel = new javax.swing.JLabel();
		txtRoomNo = new javax.swing.JTextField();
		roomAddButton = new javax.swing.JButton();

		dormAddDutton.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
		dormAddDutton.setText("ADD");

		setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

		roomDormNumberLabel.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
		roomDormNumberLabel.setText("Dorm :");

		roomRoomNumberLabel.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
		roomRoomNumberLabel.setText("Room Type :");

		roomRoomTypeLabel.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
		roomRoomTypeLabel.setText("Room No :");

		roomAddButton.setBackground(new java.awt.Color(204, 255, 204));
		roomAddButton.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
		roomAddButton.setText("ADD");
		roomAddButton.addActionListener(new java.awt.event.ActionListener() {
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				try {
					addRoomButtonActionPerformed(evt);
				} catch (SQLException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		});
		

		cboxRoomType.addMouseListener(new MouseAdapter() {
			@Override
			public void mouseClicked(MouseEvent evt) {
				displayRoomTypeMouseClicked(evt);
			}

			private void displayRoomTypeMouseClicked(MouseEvent evt) {
				DBConnection conn =new DBConnection();
				
						try {
						
							ArrayList<String> list=conn.displayRoomType();
							for(int i =0;i<list.size();i++)
							 cboxRoomType.addItem(list.get(i));
						} catch (SQLException e) {
				
							e.printStackTrace();
						}
						
					}
				
			
		});
		

		cboxDorm.addMouseListener(new MouseAdapter() {
			@Override
			public void mouseClicked(MouseEvent me) {
				displayDormMouseClicked(me);
			}

			private void displayDormMouseClicked(MouseEvent me) {
				// TODO Auto-generated method stub
				DBConnection conn =new DBConnection();
		
				try {
				
					ArrayList<String> list=conn.displayDorm();
					for(int i =0;i<list.size();i++)
					 cboxDorm.addItem(list.get(i));
				} catch (SQLException e) {
		
					e.printStackTrace();
				}
				
			}
		});

		javax.swing.GroupLayout layout = new javax.swing.GroupLayout(
				getContentPane());
		layout.setHorizontalGroup(
			layout.createParallelGroup(Alignment.LEADING)
				.addGroup(Alignment.TRAILING, layout.createSequentialGroup()
					.addContainerGap()
					.addGroup(layout.createParallelGroup(Alignment.TRAILING)
						.addComponent(roomAddButton, GroupLayout.PREFERRED_SIZE, 66, GroupLayout.PREFERRED_SIZE)
						.addGroup(layout.createSequentialGroup()
							.addGroup(layout.createParallelGroup(Alignment.LEADING)
								.addComponent(roomDormNumberLabel, GroupLayout.DEFAULT_SIZE, 143, Short.MAX_VALUE)
								.addComponent(roomRoomNumberLabel, GroupLayout.DEFAULT_SIZE, 143, Short.MAX_VALUE))
							.addGroup(layout.createParallelGroup(Alignment.LEADING)
								.addComponent(cboxRoomType, 0, 120, Short.MAX_VALUE)
								.addComponent(cboxDorm, Alignment.TRAILING, 0, 120, Short.MAX_VALUE)))
						.addGroup(Alignment.LEADING, layout.createSequentialGroup()
							.addComponent(roomRoomTypeLabel, GroupLayout.DEFAULT_SIZE, 139, Short.MAX_VALUE)
							.addPreferredGap(ComponentPlacement.RELATED)
							.addComponent(txtRoomNo, GroupLayout.DEFAULT_SIZE, 120, Short.MAX_VALUE)))
					.addGap(34))
		);
		layout.setVerticalGroup(
			layout.createParallelGroup(Alignment.LEADING)
				.addGroup(layout.createSequentialGroup()
					.addGap(22)
					.addGroup(layout.createParallelGroup(Alignment.BASELINE)
						.addComponent(roomDormNumberLabel)
						.addComponent(cboxDorm, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
					.addGap(21)
					.addGroup(layout.createParallelGroup(Alignment.BASELINE)
						.addComponent(roomRoomNumberLabel)
						.addComponent(cboxRoomType, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
					.addPreferredGap(ComponentPlacement.RELATED, 28, Short.MAX_VALUE)
					.addGroup(layout.createParallelGroup(Alignment.BASELINE)
						.addComponent(roomRoomTypeLabel)
						.addComponent(txtRoomNo, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
					.addGap(32)
					.addComponent(roomAddButton)
					.addGap(41))
		);
		getContentPane().setLayout(layout);

		pack();
	}// </editor-fold>//GEN-END:initComponents

	private void addRoomButtonActionPerformed(java.awt.event.ActionEvent evt)
			throws SQLException {
		Room room = new Room();	
		int roomNo = Integer.parseInt(txtRoomNo.getText());
		String roomType = cboxRoomType.getSelectedItem().toString();
		room.setRoomNo(roomNo);
		room.setTypeName(roomType);
		Dorm dorm = new Dorm();
		String dormName=cboxDorm.getSelectedItem().toString();	
	
		dorm.setDormName(dormName);
	
		System.out.println(roomNo);
		DBConnection connection = new DBConnection();
		if (connection.insertRoom(room,dorm)) {
			System.out.println("Kayit basarili");
		} else {
			System.out.println("Kayit basarisiz");
		}
	}

	// Variables declaration - do not modify//GEN-BEGIN:variables
	private javax.swing.JButton roomAddButton;
	private javax.swing.JButton dormAddDutton;
	private javax.swing.JLabel roomDormNumberLabel;
	private javax.swing.JLabel roomRoomNumberLabel;
	private javax.swing.JLabel roomRoomTypeLabel;
	private javax.swing.JTextField txtRoomNo;
}
